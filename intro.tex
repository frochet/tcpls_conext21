% !TEX root = ./paper.tex
The Transmission Control Protocol (\tcp) \cite{rfc793} is one of the most critical protocols in today's Internet. A wide range of applications that require reliable delivery use it. During the last four decades, \tcp evolved under the pressure of competing protocols. During the 1980s, software-based \tcp implementations were considered too slow. Researchers proposed new transport protocols such as \xtp~\cite{sanders1990xpress} which could be implemented in hardware. Meanwhile, \tcp implementations got a considerable speed boost~\cite{clark1989analysis}, and \xtp did not succeed.  However,
the \tcp speed boost and usage triggered the development of various important \tcp extensions, including timestamps and large windows~\cite{rfc1323} to scale to the gigabit link speed or Selective Acknowledgments~\cite{rfc2018}.

During the late nineties, early 2000s, transport protocol researchers
explored other alternatives to \tcp. Two of these approaches were adopted
and standardized within the IETF: \dccp~\cite{kohler2006designing} and
\sctp~\cite{rfc4960}. We rarely use \dccp today. Despite its benefits
(support for multihoming, better design, and extensibility), only a few niche
applications use \sctp~\cite{budzisz2012taxonomy}. This limited deployment is probably due to two different factors. First, \sctp required changes to the applications to replace \tcp. Second, operators have deployed middleboxes (NAT, firewalls, etc.) that often block packets that do not carry \tcp or \udp~\cite{honda2011still}.

\sctp initially supported multihoming by switching from one path to another. It
was later extended to be able to use different paths continuously~\cite{iyengar2006concurrent}.  Multipath \tcp~\cite{rfc6824,raiciu2012hard} brought similar multihoming capabilitiy to \tcp, and included a coupled congestion control scheme~\cite{wischik2011design}, later brought to \sctp as well. This particular
succession of events shows how different designs can collaborate to advance each others.  Multipath \tcp is now deployed, notably on
smartphones~\cite{bonaventure2016multipath}. Other recent \tcp extensions include \tcp Fast Open~\cite{rfc7413} or TCPCrypt~\cite{rfc8548}.


%However, there are several limits to \tcp's extensibility. First, the
%entire \tcp header, including options, cannot be longer than
%64 bytes, which leaves a limited space to carry new options, in particular
%inside SYN packets. The IETF tried to circumvent this limitation
%\cite{draft-ietf-tcpm-tcp-edo-10}, but no \tcp stack has adopted it.
%Second, and more importantly, various
%deployed middleboxes make assumptions about the semantics of the \tcp
%packets that they process. Some of these middlebox, e.g. in mobile or
%satellite networks, transparently terminate \tcp connections initiated by
%client devices to optimise their performance. Others, like firewalls, analyse
%the packets exchanged to detect varioustypes of attacks.
%Unfortunately, many of these middleboxes block the \tcp options that they
%do not understand. This is affected the design of recent \tcp extensions like
%Multipath \tcp or Fast Open that has even been disabled by some vendors
%due to operational issues with middleboxes. This problem also
%affects other standardised transport protocols like DCCP \cite{} or
%SCTP \cite{} that already have difficulties to traverse simple middleboxes
%such as NATs.

In the mid-nineties, the Secure Socket Layer protocol was proposed to secure
emerging e-commerce websites~\cite{draft-hickman-netscape-ssl}. This protocol
evolved in different versions of the Transport Layer Security (\tls) protocol, the most recent one being version 1.3~\cite{rfc8446}. Many details of the \tls protocol have changed since the first version of SSL~\cite{kotzias2018coming}. Nowadays, \tls is almost ubiquitous on web servers~\cite{holz2019era} thanks to the availability of various \tls implementations and automated certificate authorities~\cite{aas2019let}. Furthermore, many non-web applications also rely on \tls~\cite{anderson2019tls}.

%In parallel, we also observe a growing deployment of \tls. A large fraction of
%the Internet traffic is currently composed of application data secured by \tls
%that is transported by \tcp. \tls brings several benefits from privacy and
%security viewpoints, but does not currently help with the middlebox problem.

Transport protocols continued to evolve in parallel. \quic started as
a proprietary protocol used by Google to speed up web
transfers~\cite{roskind2013quic,langley2017quic}. During the last years, it evolved into a complete transport protocol whose standardization is being finalized within the IETF~\cite{draft-ietf-quic-transport}. \quic combines the
functions that are usually found in \tcp, \tls, and HTTP/2. A key characteristic
of \quic is that it encrypts almost all the packets, including most of their headers. Although \quic is essentially a new transport protocol, it does not run
directly above IP in contrast with \sctp, \tcp, or \dccp. \quic runs above \udp. This choice is mainly motivated by the desire to avoid as much as possible
middlebox interference. \quic's clean architecture has attracted researchers
who have already proposed various extensions to the protocol~\cite{de2019pluginizing,viernickel2018multipath,polese2019survey,michel2019quic,draft-huitema-quic-ts,draft-shi-quic-dtp,draft-swett-nwcrg-coding-for-quic}.

Does the finalization of version 1 of the \quic specification mark the
end of the \tcp era and move all transport research on this new protocol?
We do not think so. History tells us that \tcp has evolved with competing
transport protocols. \quic is today's competitor, but there is still plenty of
room to improve \tcp.

In this paper, we take a step back. As \quic benefits from a closer integration between the reliability and the security mechanisms, we reconsider the separation between \tcp and \tls.
%By considering \tcp and
%\tls as independent protocols,  a very important opportunity.
\tls brings security features, but \tls 1.3 can do much more. Thanks to the \tls 1.3 messages and records' extensibility, \tls can provide a secondary channel that enables hosts to exchange more control information and structured data. Furthermore, since \tls records are encrypted, middleboxes cannot easily interfere with the data exchanged over this new channel.

%In this paper, we combine both \tcp and \tls in a single protocol called \textbf{\tcpls}. We describe in Sec.~\ref{sec:design} a first design for \tcpls with the goals of ($i$) solving extensibility issues in \tcp. ($ii$) Exporting complex transport features to the application and, ($iii$), drawing a path to make \tcp/\tls a good challenger to \quic with modern appications.   This paper also discusses how \tls flexible record layer can be used to provide a new channel to exchange information between \tcpls implementations. The design presentation concludes with an overview of the API to interact with the application.  Our second contribution is the ongoing
%implementation of a \tcpls prototype on Linux by extending \texttt{picotls}, a
%\texttt{TLS 1.3}
%implementation.  We use it in Section~\ref{sec:prototype} to illustrate the
%benefits of \tcpls with a multihoming connection migration use case. Finally, we analyze in Section~\ref{sec:research} some of the research questions that \tcpls opens.

In this paper, we combine both \tcp and \tls in a single fast, flexible, and secure protocol called \textbf{\tcpls}.  We have designed \tcpls with three goals in mind.  First, we aim at solving extensibility issues in \tcp \todo{BD: How? A quick word on that here would be appreciated}. Second, we export complex transport features, such as multipath capabilities \todo{BD: correct?}, to the application.  Finally, we draw a path to make \tcpls a good challenger to \quic. With that in mind, we have implemented \tcpls \todo{as a something in some library that will be made available upon the paper acceptance}.  It is also worth noticing that our implementation makes used of \tls flexible record layer so that it provides a new channel to exchange information between \tcpls information \todo{BD: provide here, with a few words, motivations and advantages of this additionnal channel}.  Finally, this paper evaluates the efficiency of our \tcpls implementation with respect to state of the art.  In particular, we demonstrate \todo{BD: summarize here the main measurements results}


The remainder of this paper is organized as follows: Sec.~\ref{sec:background} provides the required technical background; Sec.~\ref{sec:background-design} discusses how we designed \tcpls, while Sec.~\ref{sec:prototype} focuses on how we implemented \tcpls; Sec.~\ref{sec:evaluation} evaluates the performance and behavior of \tcpls;  finally, Sec.~\ref{sec:conclusion} concludes this paper by summarizing its main achievements and discussing further directions.

% Extending \tls's philosophy of protecting the transport layer (only Integrity,
% confidentiality and Authentication); now would also improve other issues of
% the transport layer.

%middlebox interferences

%The beneÔ¨Åt of upgrading an individual endpoint depends on the number of other
%endpoints that have already been upgraded,since the new protocol is not
%effective unless both have it

% Talk about the backward-compatible nightmare when the security is at stake

% \tls offers an opportunity to fix part of \tcp's issues, offering a right
% abstraction of what a transport layer means for a given application.
